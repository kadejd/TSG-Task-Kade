(this.webpackJsonptsgtask=this.webpackJsonptsgtask||[]).push([[0],{241:function(t,e,a){},410:function(t,e,a){"use strict";a.r(e);var n=a(0),s=a.n(n),r=a(48),i=a.n(r),c=(a(240),a.p,a(241),a(229)),o=a(27),l=a(116),u=a(12),p=a.n(u),d=a(22),h=a(59),j=a(60),b=a(61),f=a(65),O=a(421),x=a(422),m=a(423),y=a(226),w=a(424),g=a(425),v=a(446),C=a(447),S=a(426),k=a(420),T=a(427),D=a(428),A=a(445),K=a(429),I=a(430),M=a(431),F=a(432),z=a(433),L=a(434),N=a(98),B=a.n(N),R=function(){var t=Object(d.a)(p.a.mark((function t(e){var a,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,B.a.get(e);case 3:return a=t.sent,n=Object.keys(a).map((function(t){return a[t]})),t.abrupt("return",{status:n[2],data:n[0]});case 8:return t.prev=8,t.t0=t.catch(0),t.abrupt("return",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}(),P=function(){var t=Object(d.a)(p.a.mark((function t(e,a){var n,s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,B.a.post(e,a);case 3:return n=t.sent,s=Object.keys(n).map((function(t){return n[t]})),t.abrupt("return",{status:s[2],data:s[0]});case 8:return t.prev=8,t.t0=t.catch(0),t.abrupt("return",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,a){return t.apply(this,arguments)}}(),E=function(){var t=Object(d.a)(p.a.mark((function t(e,a){var n,s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,B.a.patch(e,a);case 3:return n=t.sent,s=Object.keys(n).map((function(t){return n[t]})),t.abrupt("return",{status:s[2],data:s[0]});case 8:return t.prev=8,t.t0=t.catch(0),t.abrupt("return",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,a){return t.apply(this,arguments)}}(),U=function(){var t=Object(d.a)(p.a.mark((function t(e,a){var n,s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,B.a.put(e,a);case 3:return n=t.sent,s=Object.keys(n).map((function(t){return n[t]})),t.abrupt("return",{status:s[2],data:s[0]});case 8:return t.prev=8,t.t0=t.catch(0),t.abrupt("return",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,a){return t.apply(this,arguments)}}(),H=function(){var t=Object(d.a)(p.a.mark((function t(e){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return{name:"Test",description:"Test",hasSupportContract:!1,customerId:0},t.next=3,P("https://techtestcalllogapi.azurewebsites.net/api/Application",e);case 3:return a=t.sent,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),J=function(){var t=Object(d.a)(p.a.mark((function t(e){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return{applicationId:0,name:"",description:"",hasSupportContract:!1},t.next=3,U("https://techtestcalllogapi.azurewebsites.net/api/Application",e);case 3:return a=t.sent,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),V=function(){var t=Object(d.a)(p.a.mark((function t(e){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R("https://techtestcalllogapi.azurewebsites.net/api/Application/customer/"+e);case 2:return a=t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),G=function(){var t=Object(d.a)(p.a.mark((function t(e){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return{callId:0,status:0},t.next=3,E("https://techtestcalllogapi.azurewebsites.net/api/Call",e);case 3:return a=t.sent,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Y=function(){var t=Object(d.a)(p.a.mark((function t(e){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R("https://techtestcalllogapi.azurewebsites.net/api/Call/customer/"+e);case 2:return a=t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),q=function(){var t=Object(d.a)(p.a.mark((function t(){var e;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R("https://techtestcalllogapi.azurewebsites.net/api/Customer");case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Q=function(){var t=Object(d.a)(p.a.mark((function t(e){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R("https://techtestcalllogapi.azurewebsites.net/api/Customer/"+e);case 2:return a=t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),W=function(){var t=Object(d.a)(p.a.mark((function t(e){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R("https://techtestcalllogapi.azurewebsites.net/api/Statistics/"+e);case 2:return a=t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),X=function(){var t=Object(d.a)(p.a.mark((function t(){var e;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R("https://techtestcalllogapi.azurewebsites.net/api/Status");case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();function Z(t){if("0001-01-01T00:00:00"===t)return"Not Yet Checked out";var e=new Date(Date.parse(t));return new Intl.DateTimeFormat("en-GB",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!0}).format(e)}var $=a(45),_=a(444),tt=a(218),et=a(113),at=a(100),nt=a(97),st=a(415),rt=a(416),it=a(81),ct=a(82),ot=a(223),lt=a(417),ut=a(224),pt=a(418),dt=a(225),ht=a(419),jt=a(3),bt=["#0088FE","#00C49F","#FF5C33"],ft=Math.PI/180,Ot=function(t){var e=t.cx,a=t.cy,n=t.midAngle,s=t.innerRadius,r=t.outerRadius,i=t.percent,c=(t.index,s+.5*(r-s)),o=e+c*Math.cos(-n*ft),l=a+c*Math.sin(-n*ft);return Object(jt.jsx)("text",{x:o,y:l,fill:"white",textAnchor:o>e?"start":"end",dominantBaseline:"central",children:"".concat((100*i).toFixed(0),"%")})},xt=function(t){Object(b.a)(a,t);var e=Object(f.a)(a);function a(t){return Object(h.a)(this,a),e.call(this,t)}return Object(j.a)(a,[{key:"renderChartType",value:function(){switch(this.props.chartType){case"Bar":return this.barChart();case"Line":return this.lineChart();case"Area":return this.areaChart();case"Pie":return this.pieChart();case"Scatter":return this.scatterChart();default:return this.barChart()}}},{key:"pieChart",value:function(){return Object(jt.jsxs)(_.a,{width:this.props.width,height:this.props.height,data:this.props.data,children:[Object(jt.jsx)(tt.a,{data:this.props.data,cx:"50%",cy:"50%",labelLine:!1,label:Ot,outerRadius:80,fill:"#8884d8",dataKey:"value",children:this.props.data.map((function(t,e){return Object(jt.jsx)(et.a,{fill:bt[e%bt.length]},"cell-".concat(e))}))}),Object(jt.jsx)(at.a,{}),Object(jt.jsx)(nt.a,{})]})}},{key:"areaChart",value:function(){return Object(jt.jsxs)(st.a,{width:this.props.width,height:this.props.height,data:this.props.data,margin:{top:10,bottom:0,left:0,right:0},children:[Object(jt.jsx)(rt.a,{strokeDasharray:"3 3"}),Object(jt.jsx)(it.a,{style:{fontSize:6},dataKey:"customerName"}),Object(jt.jsx)(ct.a,{}),Object(jt.jsx)(at.a,{}),Object(jt.jsx)(nt.a,{}),Object(jt.jsx)(ot.a,{name:this.props.labelOne,type:"monotone",dataKey:this.props.dataKeyOne,fill:"#e60000"}),Object(jt.jsx)(ot.a,{name:this.props.labelTwo,type:"monotone",dataKey:this.props.dataKeyTwo,fill:"#82ca9d"}),Object(jt.jsx)(ot.a,{name:this.props.labelThree,type:"monotone",dataKey:this.props.dataKeyThree,fill:"#8884d8"})]})}},{key:"lineChart",value:function(){return Object(jt.jsxs)(lt.a,{width:this.props.width,height:this.props.height,data:this.props.data,margin:{top:10,bottom:0,left:0,right:0},children:[Object(jt.jsx)(rt.a,{strokeDasharray:"3 3"}),Object(jt.jsx)(it.a,{style:{fontSize:6},dataKey:"customerName"}),Object(jt.jsx)(ct.a,{}),Object(jt.jsx)(at.a,{}),Object(jt.jsx)(nt.a,{}),Object(jt.jsx)(ut.a,{name:this.props.labelOne,type:"monotone",dataKey:this.props.dataKeyOne,fill:"#8884d8"}),Object(jt.jsx)(ut.a,{name:this.props.labelTwo,type:"monotone",dataKey:this.props.dataKeyTwo,fill:"#82ca9d"}),Object(jt.jsx)(ut.a,{name:this.props.labelThree,type:"monotone",dataKey:this.props.dataKeyThree,fill:"#ff5c33"})]})}},{key:"barChart",value:function(){return Object(jt.jsxs)(pt.a,{width:this.props.width,height:this.props.height,data:this.props.data,margin:{top:10,bottom:0,left:0,right:0},children:[Object(jt.jsx)(rt.a,{strokeDasharray:"3 3"}),Object(jt.jsx)(it.a,{style:{fontSize:6},dataKey:"customerName"}),Object(jt.jsx)(ct.a,{}),Object(jt.jsx)(at.a,{}),Object(jt.jsx)(nt.a,{}),Object(jt.jsx)(dt.a,{name:this.props.labelOne,dataKey:this.props.dataKeyOne,fill:"#8884d8"}),Object(jt.jsx)(dt.a,{name:this.props.labelTwo,dataKey:this.props.dataKeyTwo,fill:"#82ca9d"}),Object(jt.jsx)(dt.a,{name:this.props.labelThree,dataKey:this.props.dataKeyThree,fill:"#ff5c33"})]})}},{key:"render",value:function(){return Object(jt.jsxs)(ht.a,{style:{width:this.props.width+60,borderRadius:3,border:"1px solid lightgrey",paddingBottom:5,marginBottom:5},children:[Object(jt.jsx)(k.a,{style:{textAlign:"center",fontSize:20,width:"100%",marginTop:10},children:this.props.title}),this.renderChartType()]})}}]),a}(n.PureComponent),mt=function(t){Object(b.a)(a,t);var e=Object(f.a)(a);function a(t){var n;return Object(h.a)(this,a),(n=e.call(this,t)).state={customer:{id:0,name:""},applications:[],calls:[],stats:[],statusList:[],statusDropdownId:0,statusFilterDropdownOpen:!1,pieClosedCalls:[],filteredCalls:[],applicationInfo:{name:"",description:"",hasSupportContract:!1,id:0},applicationModalOpen:!1},n.toggleApplicationModal=function(){n.setState({applicationModalOpen:!n.state.applicationModalOpen})},n.newOrUpdateApplication=function(){if(0===n.state.applicationInfo.id){var t={name:n.state.applicationInfo.name,description:n.state.applicationInfo.description,hasSupportContract:n.state.applicationInfo.hasSupportContract,customerId:n.state.customer.id};H(t).then((function(t){var e=n.state.applications;e.push(t.data),$.b.success("Application Created");n.setState({applications:e,applicationInfo:{name:"",description:"",hasSupportContract:!1,id:0}},n.toggleApplicationModal())}))}else{var e={applicationId:n.state.applicationInfo.id,name:n.state.applicationInfo.name,description:n.state.applicationInfo.description,hasSupportContract:n.state.applicationInfo.hasSupportContract};J(e).then((function(t){if("OK"==t.status){var e=n.state.applications;e.map((function(a,n){a.id===t.data.id&&(e[n]=t.data)})),$.b.success("Application Updated"),n.setState({applications:e},n.toggleApplicationModal())}})).catch((function(t){$.b.warn("Error Updating")}))}},n.getAllCustomerDataById=function(){var t=Object(d.a)(p.a.mark((function t(e){var a,s,r,i,c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,V(e);case 2:return a=t.sent,t.next=5,Y(e);case 5:return s=t.sent,t.next=8,W(e);case 8:return r=t.sent,t.next=11,X();case 11:i=t.sent,"OK"===a.status&&n.setState({customer:a.data[0].customer,applications:a.data}),"OK"===s.status&&n.setState({calls:s.data,filteredCalls:s.data}),"OK"===r.status&&(c=[{name:"Total Calls",value:r.data.closedCalls.totalCalls},{name:"Satisfactory",value:r.data.closedCalls.satisfactory},{name:"Unstatisfactory",value:r.data.closedCalls.unsatisfactory}],n.setState({stats:r.data,pieClosedCalls:c})),"OK"===i.status&&n.setState({statusList:i.data});case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n.getCustomerById=function(){var t=Object(d.a)(p.a.mark((function t(e){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Q(e);case 2:"OK"===(a=t.sent).status&&n.setState({customer:a.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n.onChangeApplicationDetails=function(t){var e=Object(l.a)({},n.state.applicationInfo);"checkbox"===t.target.type?e[t.target.name]=t.target.checked:e[t.target.name]=t.target.value,n.setState({applicationInfo:e})},n.toggleStatusDropdown=function(t){n.state.statusDropdownId==t?n.setState({statusDropdownId:0}):n.setState({statusDropdownId:t})},n.toggleFilterStatusDropdown=function(){n.setState({statusFilterDropdownOpen:!n.state.statusFilterDropdownOpen})},n.filterByStatus=function(t){if("All"==t)n.setState({filteredCalls:n.state.calls});else{var e=n.state.calls.filter((function(e){return e.status.description==t}));n.setState({filteredCalls:e})}},n}return Object(j.a)(a,[{key:"componentDidMount",value:function(){this.getAllCustomerDataById(this.props.match.params.id)}},{key:"selectCurrentApplication",value:function(t){var e=this.state.applicationInfo;e.id=this.state.applications[t].id,e.name=this.state.applications[t].name,e.description=this.state.applications[t].description,e.hasSupportContract=this.state.applications[t].hasSupportContract,this.setState({applicationInfo:e},this.toggleApplicationModal())}},{key:"setStatusOfCall",value:function(t,e,a){var n=this;G({callId:t,status:e}).then((function(t){if("OK"===t.status){var e=n.state.calls;e[a]=t.data,n.setState({calls:e,filteredCalls:e}),$.b.success("Status Changed To "+t.data.status.description)}else $.b.error("Error Changing Status")}))}},{key:"renderApplicationTable",value:function(){var t=this;return Object(jt.jsx)(O.a,{children:Object(jt.jsxs)(x.a,{style:{overflow:"scroll",height:760},children:[Object(jt.jsxs)(m.a,{style:{width:"100%",textAlign:"center",fontSize:25},children:["Applications ",Object(jt.jsx)(y.a,{onClick:this.toggleApplicationModal,style:{float:"right"},size:"sm",color:"primary",children:"New"})]}),Object(jt.jsxs)(w.a,{hover:!0,style:{fontSize:13},children:[Object(jt.jsx)("thead",{children:Object(jt.jsxs)("tr",{children:[Object(jt.jsx)("th",{children:"Application"}),Object(jt.jsx)("th",{children:"Install Date"}),Object(jt.jsx)("th",{children:"Has Support Contract"}),Object(jt.jsx)("th",{children:"View"})]})}),Object(jt.jsx)("tbody",{children:this.state.applications.map((function(e,a){return Object(jt.jsxs)("tr",{children:[Object(jt.jsx)("td",{children:e.name}),Object(jt.jsx)("td",{children:Z(e.installationDate)}),Object(jt.jsx)("td",{children:!0===e.hasSupportContract?"True":"False"}),Object(jt.jsx)("td",{children:Object(jt.jsx)(y.a,{onClick:function(){return t.selectCurrentApplication(a)},size:"sm",color:"primary",children:"View"})})]},a)}))})]})]})})}},{key:"renderCallsTable",value:function(){var t=this;return Object(jt.jsx)(O.a,{children:Object(jt.jsxs)(x.a,{style:{overflow:"scroll",height:760},children:[Object(jt.jsx)(m.a,{style:{width:"100%",textAlign:"center",fontSize:25},children:"Calls"}),Object(jt.jsxs)(w.a,{hover:!0,style:{fontSize:13},children:[Object(jt.jsx)("thead",{children:Object(jt.jsxs)("tr",{children:[Object(jt.jsx)("th",{children:"Application"}),Object(jt.jsx)("th",{children:"Description"}),Object(jt.jsxs)("th",{children:["Status",Object(jt.jsxs)(g.a,{style:{paddingLeft:5},isOpen:this.state.statusFilterDropdownOpen,toggle:function(){return t.toggleFilterStatusDropdown()},children:[Object(jt.jsx)(v.a,{caret:!0,size:"sm",children:"Filter Status"}),Object(jt.jsxs)(C.a,{children:[this.state.statusList.map((function(e,a){return Object(jt.jsx)(S.a,{id:a,onClick:function(){return t.filterByStatus(e.description)},children:e.description})})),Object(jt.jsx)(S.a,{onClick:function(){return t.filterByStatus("All")},children:"All"})]})]})]})]})}),Object(jt.jsx)("tbody",{children:this.state.filteredCalls.map((function(e,a){return Object(jt.jsxs)("tr",{children:[Object(jt.jsx)("td",{children:e.application.name}),Object(jt.jsx)("td",{children:e.description}),Object(jt.jsx)("td",{children:Object(jt.jsxs)(g.a,{isOpen:t.state.statusDropdownId==e.id,toggle:function(){return t.toggleStatusDropdown(e.id)},children:[Object(jt.jsx)(v.a,{caret:!0,children:e.status.description}),Object(jt.jsx)(C.a,{children:t.state.statusList.map((function(n,s){if(n.description!==e.status.description)return Object(jt.jsx)(S.a,{id:s,onClick:function(){return t.setStatusOfCall(e.id,n.id,a)},children:n.description})}))})]})})]},a)}))})]})]})})}},{key:"render",value:function(){var t=this,e=0===this.state.applicationInfo.id?"New Application":"Edit Application";return Object(jt.jsxs)("div",{children:[Object(jt.jsx)(k.a,{style:{width:"100%",textAlign:"center",fontSize:40},children:this.state.customer.name}),Object(jt.jsxs)(T.a,{style:{margin:5},children:[Object(jt.jsx)(D.a,{xs:4,children:this.renderApplicationTable()}),Object(jt.jsx)(D.a,{xs:4,children:this.renderCallsTable()}),Object(jt.jsxs)(D.a,{children:[Object(jt.jsxs)(T.a,{style:{paddingBottom:40},children:[Object(jt.jsx)(xt,{width:200,height:300,title:"Open Calls",data:[this.state.stats.openCalls],labelOne:"Total Calls",labelTwo:"Responded",labelThree:"Awaiting Response",dataKeyOne:"totalCalls",dataKeyTwo:"responded",dataKeyThree:"awaitingResponse"}),Object(jt.jsx)(xt,{chartType:"Pie",width:200,height:300,title:"Closed Calls",data:this.state.pieClosedCalls,labelOne:"Total Calls",labelTwo:"Satisfactory",labelThree:"Unsatisfactory",dataKeyOne:"totalCalls",dataKeyTwo:"satisfactory",dataKeyThree:"unsatisfactory"})]}),Object(jt.jsx)(xt,{width:200,height:300,title:"Last 3 Months",data:[this.state.stats.lastThreeMonths],labelOne:"Month 1",labelTwo:"Month 2",labelThree:"Month 3",dataKeyOne:"month1",dataKeyTwo:"month2",dataKeyThree:"month3"})]})]}),Object(jt.jsxs)(A.a,{isOpen:this.state.applicationModalOpen,toggle:this.toggleApplicationModal,children:[Object(jt.jsx)(K.a,{toggle:this.toggleApplicationModal,children:e}),Object(jt.jsx)(I.a,{children:Object(jt.jsxs)(M.a,{children:[Object(jt.jsxs)(F.a,{children:[Object(jt.jsx)(k.a,{for:"newApplicationName",sm:2,children:"Name"}),Object(jt.jsx)(z.a,{onChange:function(e){return t.onChangeApplicationDetails(e)},value:this.state.applicationInfo.name,name:"name",id:"newApplicationName",placeholder:"Application Name"}),Object(jt.jsx)(k.a,{for:"newApplicationDescription",sm:2,children:"Description"}),Object(jt.jsx)(z.a,{onChange:function(e){return t.onChangeApplicationDetails(e)},value:this.state.applicationInfo.description,name:"description",id:"newApplicationDescription",placeholder:"Application Description"})]}),Object(jt.jsx)(F.a,{check:!0,children:Object(jt.jsxs)(k.a,{check:!0,children:[Object(jt.jsx)(z.a,{onChange:function(e){return t.onChangeApplicationDetails(e)},type:"checkbox",name:"hasSupportContract",checked:this.state.applicationInfo.hasSupportContract})," ","Has Support Contract"]})})]})}),Object(jt.jsxs)(L.a,{children:[Object(jt.jsx)(y.a,{color:"primary",onClick:this.newOrUpdateApplication,children:"Save"})," ",Object(jt.jsx)(y.a,{color:"secondary",onClick:this.toggleApplicationModal,children:"Cancel"})]})]})]})}}]),a}(n.Component),yt=function(t){Object(b.a)(a,t);var e=Object(f.a)(a);function a(){var t;return Object(h.a)(this,a),(t=e.call(this)).state={stats:[],customers:[],openCalls:[],closedCalls:[],lastThreeMonths:[]},t}return Object(j.a)(a,[{key:"componentDidMount",value:function(){this.getStatistics()}},{key:"getStatistics",value:function(){var t=this;q().then(function(){var e=Object(d.a)(p.a.mark((function e(a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(a.data.map(function(){var t=Object(d.a)(p.a.mark((function t(e,a){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,W(e.id);case 2:if("OK"!=(n=t.sent).status){t.next=5;break}return t.abrupt("return",n.data);case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()));case 2:n=e.sent,t.buildStatistics(n,a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"buildStatistics",value:function(t,e){var a=t.map((function(t,e){return{customerName:t.customer.name,totalCalls:t.openCalls.totalCalls,responded:t.openCalls.responded,awaitingResponse:t.openCalls.awaitingResponse}})),n=t.map((function(t,e){return{customerName:t.customer.name,totalCalls:t.closedCalls.totalCalls,satisfactory:t.closedCalls.satisfactory,unsatisfactory:t.closedCalls.unsatisfactory}})),s=t.map((function(t,e){return{customerName:t.customer.name,month1:t.lastThreeMonths.month1,month2:t.lastThreeMonths.month2,month3:t.lastThreeMonths.month3}}));this.setState({openCalls:a,closedCalls:n,lastThreeMonths:s,stats:t,customers:e})}},{key:"render",value:function(){return Object(jt.jsx)(ht.a,{style:{padding:10},children:Object(jt.jsxs)(T.a,{children:[Object(jt.jsx)(xt,{width:500,height:350,title:"Open Calls",data:this.state.openCalls,labelOne:"Total Calls",labelTwo:"Responded",labelThree:"Awaiting Response",dataKeyOne:"totalCalls",dataKeyTwo:"responded",dataKeyThree:"awaitingResponse"}),Object(jt.jsx)(xt,{width:500,height:350,title:"Closed Calls",data:this.state.closedCalls,labelOne:"Total Calls",labelTwo:"Satisfactory",labelThree:"Unsatisfactory",dataKeyOne:"totalCalls",dataKeyTwo:"satisfactory",dataKeyThree:"unsatisfactory"}),Object(jt.jsx)(xt,{chartType:"Line",width:500,height:350,title:"Last 3 Months",data:this.state.lastThreeMonths,labelOne:"Month 1",labelTwo:"Month 2",labelThree:"Month 3",dataKeyOne:"month1",dataKeyTwo:"month2",dataKeyThree:"month3"})]})})}}]),a}(n.Component),wt=function(t){Object(b.a)(a,t);var e=Object(f.a)(a);function a(t){var n;return Object(h.a)(this,a),(n=e.call(this)).state={calls:[],filteredCalls:[],callsTableData:[],statusList:[],statusDropdownId:0,statusFilterDropdownOpen:!1},n.toggleStatusDropdown=function(t){n.state.statusDropdownId==t?n.setState({statusDropdownId:0}):n.setState({statusDropdownId:t})},n.toggleFilterStatusDropdown=function(){n.setState({statusFilterDropdownOpen:!n.state.statusFilterDropdownOpen})},n.filterByStatus=function(t){if("All"==t)n.setState({filteredCalls:n.state.calls});else{var e=n.state.calls.filter((function(e){return e.status.description==t}));n.setState({filteredCalls:e})}},n}return Object(j.a)(a,[{key:"componentDidMount",value:function(){this.getAllCalls()}},{key:"getAllCalls",value:function(){var t=this;q().then(function(){var e=Object(d.a)(p.a.mark((function e(a){var n,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(a.data.map(function(){var t=Object(d.a)(p.a.mark((function t(e,a){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Y(e.id);case 2:if("OK"!=(n=t.sent).status){t.next=5;break}return t.abrupt("return",n.data);case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()));case 2:return n=e.sent,e.next=5,X();case 5:"OK"==(s=e.sent).status&&t.setState({statusList:s.data}),t.buildCallsTableData(n,a.data);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"setStatusOfCall",value:function(t,e,a){var n=this;G({callId:t,status:e}).then((function(t){if("OK"===t.status){var e=n.state.calls;e[a]=t.data,n.setState({calls:e,filteredCalls:e}),$.b.success("Status Changed To "+t.data.status.description)}else $.b.error("Error Changing Status")}))}},{key:"buildCallsTableData",value:function(t,e){var a=this,n=[];t.map((function(t,e){n=n.concat(t)}));var s=n.map((function(t,e){return{callId:t.id,applicationName:t.application.name,description:t.description,customerName:t.customer.name,status:Object(jt.jsxs)("div",{children:[t.status.description,Object(jt.jsxs)(g.a,{isOpen:a.state.statusDropdownId==t.id,toggle:function(){return a.toggleStatusDropdown(t.id)},children:[Object(jt.jsx)(v.a,{caret:!0,children:t.status.description}),Object(jt.jsx)(C.a,{children:a.state.statusList.map((function(t,e){return Object(jt.jsx)(S.a,{children:t.description})}))})]})]})}}));this.setState({callsTableData:s,calls:n,filteredCalls:n})}},{key:"render",value:function(){var t=this;return Object(jt.jsx)(ht.a,{style:{padding:30},children:Object(jt.jsx)(O.a,{style:{width:900},children:Object(jt.jsxs)(x.a,{style:{overflow:"scroll",height:760},children:[Object(jt.jsx)(m.a,{style:{width:"100%",textAlign:"center",fontSize:27},children:"Calls"}),Object(jt.jsxs)(w.a,{hover:!0,children:[Object(jt.jsx)("thead",{children:Object(jt.jsxs)("tr",{children:[Object(jt.jsx)("th",{children:"Application"}),Object(jt.jsx)("th",{children:"Description"}),Object(jt.jsx)("th",{children:"Customer Name"}),Object(jt.jsxs)("th",{children:["Status",Object(jt.jsxs)(g.a,{style:{paddingLeft:5},isOpen:this.state.statusFilterDropdownOpen,toggle:function(){return t.toggleFilterStatusDropdown()},children:[Object(jt.jsx)(v.a,{caret:!0,size:"sm",children:"Filter Status"}),Object(jt.jsxs)(C.a,{children:[this.state.statusList.map((function(e,a){return Object(jt.jsx)(S.a,{id:a,onClick:function(){return t.filterByStatus(e.description)},children:e.description})})),Object(jt.jsx)(S.a,{onClick:function(){return t.filterByStatus("All")},children:"All"})]})]})]})]})}),Object(jt.jsx)("tbody",{children:this.state.filteredCalls.map((function(e,a){return Object(jt.jsxs)("tr",{children:[Object(jt.jsx)("td",{children:e.application.name}),Object(jt.jsx)("td",{children:e.description}),Object(jt.jsx)("td",{children:e.customer.name}),Object(jt.jsx)("td",{children:Object(jt.jsxs)(g.a,{isOpen:t.state.statusDropdownId==e.id,toggle:function(){return t.toggleStatusDropdown(e.id)},children:[Object(jt.jsx)(v.a,{caret:!0,children:e.status.description}),Object(jt.jsx)(C.a,{children:t.state.statusList.map((function(n,s){if(n.description!==e.status.description)return Object(jt.jsx)(S.a,{onClick:function(){return t.setStatusOfCall(e.id,n.id,a)},children:n.description})}))})]})})]})}))})]})]})})})}}]),a}(n.Component),gt=a(33),vt=a(435),Ct=a(436),St=a(437),kt=a(438),Tt=a(439),Dt=a(440),At=a(441),Kt=a(442);function It(){var t=Object(n.useState)(!1),e=Object(gt.a)(t,2),a=e[0],s=e[1],r=Object(n.useState)([]),i=Object(gt.a)(r,2),c=i[0],o=i[1],u=Object(n.useState)({id:0,name:"Customers"}),p=Object(gt.a)(u,2),d=p[0],h=p[1];return Object(n.useEffect)((function(){q().then((function(t){if("OK"===t.status)if(window.location.pathname.includes("/customerdetails")){var e=parseInt(window.location.pathname.slice(17)),a={id:0,name:"Customers"};t.data.map((function(t,n){t.id===e&&(a=t)})),o(t.data),h(a)}else{a={id:0,name:"Customers"};o(t.data),h(a)}}))}),[]),Object(jt.jsx)("div",{style:{fontSize:20},children:Object(jt.jsxs)(vt.a,{color:"light",light:!0,expand:"md",children:[Object(jt.jsx)(Ct.a,{onClick:function(){return s(!a)}}),Object(jt.jsxs)(St.a,{isOpen:a,navbar:!0,children:[Object(jt.jsxs)(kt.a,{className:"mr-auto",navbar:!0,children:[Object(jt.jsx)(Tt.a,{children:Object(jt.jsx)(Dt.a,{style:{color:1==window.location.pathname.includes("/dashboard")?"black":"grey"},href:"/",children:"Dashboard"})}),Object(jt.jsx)(Tt.a,{children:Object(jt.jsx)(Dt.a,{style:{color:1==window.location.pathname.includes("/calls")?"black":"grey"},href:"/calls",children:"Calls"})}),Object(jt.jsxs)(At.a,{nav:!0,inNavbar:!0,children:[Object(jt.jsx)(v.a,{style:{color:1==window.location.pathname.includes("/customerdetails")?"black":"grey"},nav:!0,caret:!0,children:d.name}),Object(jt.jsx)(C.a,{left:!0,children:c.map((function(t,e){return Object(jt.jsx)(S.a,{onClick:function(){return function(t){var e=Object(l.a)({},d);e.id=t.id,e.name=t.name,h(e),window.location.assign("/customerdetails/"+t.id)}(t)},children:t.name},e)}))})]})]}),Object(jt.jsx)(Kt.a,{})]})]})})}a(407);var Mt=function(){return Object(jt.jsxs)(c.a,{children:[Object(jt.jsx)(It,{}),Object(jt.jsxs)(o.d,{children:[Object(jt.jsx)(o.b,{path:"/customerdetails/:id",exact:!0,component:mt}),Object(jt.jsx)(o.b,{path:"/calls",exact:!0,component:wt}),Object(jt.jsx)(o.b,{path:"/dashboard",exact:!0,component:yt}),Object(jt.jsx)(o.a,{to:"/dashboard"})]}),Object(jt.jsx)($.a,{})]})},Ft=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,448)).then((function(e){var a=e.getCLS,n=e.getFID,s=e.getFCP,r=e.getLCP,i=e.getTTFB;a(t),n(t),s(t),r(t),i(t)}))};i.a.render(Object(jt.jsx)(s.a.StrictMode,{children:Object(jt.jsx)(Mt,{})}),document.getElementById("root")),Ft()}},[[410,1,2]]]);
//# sourceMappingURL=main.f24786f4.chunk.js.map